% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/subtyper.R
\name{assess_prompt}
\alias{assess_prompt}
\title{Generalized Neuroscience Prompt Evaluator}
\usage{
assess_prompt(
  df,
  text_cols,
  context_col = NULL,
  prompt = "You are a neuroscientist. Return JSON.",
  backend = c("groq", "openrouter"),
  api_key_env = NULL,
  model = NULL,
  required_fields = c("short_form", "long_form"),
  user_input_prompt = "Return structured JSON output.",
  collapse_fn = function(x) paste(na.omit(x), collapse = ", "),
  max_retries = 5,
  retry_delay_base = 2,
  jitter = TRUE,
  temperature = 0.1,
  parallel = FALSE,
  .options_furrr = furrr::furrr_options(),
  cache_dir = NULL,
  verbose = TRUE,
  skip_api_key_check = FALSE
)
}
\arguments{
\item{df}{A data frame containing input data (domains, IDPs, regions, etc.).}

\item{text_cols}{Character vector, column names to collapse into the user query (e.g. IDPs, regions).}

\item{context_col}{Character, optional column name providing task context (e.g., domain). Default: NULL.}

\item{prompt}{Character, system prompt to set context. Default: "You are a neuroscientist. Return JSON."}

\item{backend}{Character, API backend ("groq", "openrouter"). Default: "groq".}

\item{api_key_env}{Character, environment variable storing the API key. Default: NULL.}

\item{model}{Character, model name. Default: NULL (uses backend default).}

\item{required_fields}{Character vector, keys required in parsed API response.
Default: c("short_form", "long_form").}

\item{user_input_prompt}{Character, additional user prompt text. Default: "Return structured JSON output."}

\item{collapse_fn}{Function, how to collapse multiple text columns. Default: \code{function(x) paste(na.omit(x), collapse = ", ")}.}

\item{max_retries}{Integer, maximum API retry attempts. Default: 5.}

\item{retry_delay_base}{Numeric, base delay (seconds) for exponential backoff. Default: 2.}

\item{jitter}{Logical, add jitter to retry delays. Default: TRUE.}

\item{temperature}{Numeric, sampling temperature (0â€“1). Default: 0.1.}

\item{parallel}{Logical, use parallel processing with \code{furrr::future_map}. Default: FALSE.}

\item{.options_furrr}{List, options for \code{furrr::future_map}. Default: \code{furrr::furrr_options()}.}

\item{cache_dir}{Character, directory for caching API responses. Default: NULL.}

\item{verbose}{Logical, print debug information. Default: TRUE.}

\item{skip_api_key_check}{Logical, if TRUE, skip API key validation (useful for testing). Default: FALSE.}
}
\value{
A tibble combining original data with parsed model outputs.
}
\description{
Queries a language model API with structured neuroscience prompts
(e.g., IDP-domain consistency, region-network assignment) and parses
the output into a clean data frame.
}
